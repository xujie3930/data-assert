<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hashtech.mapper.ThemeResourceMapper">

    <select id="getMaxSort"
            resultType="java.lang.Integer">
        select ifnull(Max(sort), 0)
        from theme_resource
    </select>

    <select id="getMaxSortByParentId"
            resultType="java.lang.Integer">
        select ifnull(Max(sort), 0)
        from theme_resource where parent_id = #{parentId}
    </select>

    <select id="hasExitName"
            resultType="java.lang.Boolean">
        select 1
        from theme_resource
        <where>
            <if test="name != null and name != '' ">
                AND name = #{name}
            </if>
            AND del_flag = 'N'
        </where>
        limit 1
    </select>

    <select id="hasExitNameByResource"
            resultType="java.lang.Boolean">
        select 1
        from theme_resource
        <where>
            <if test="name != null and name != '' ">
                AND name = #{name}
            </if>
            AND del_flag = 'N'
            AND parent_id != '0'
        </where>
        limit 1
    </select>
</mapper>
